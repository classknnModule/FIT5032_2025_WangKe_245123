import{_ as D,c as i,a as s,b as v,t as a,n as b,e as y,F as U,r as L,g as w,f as k,h as r,i as T,j as A,u as C,o as d}from"./index-LgNIJTkV.js";const p={name:"AdminDashboard",setup(){const l=C();w(),k();const t=r([]),u=r(!1),n=r(""),c=r(!0),m=r({totalUsers:0,newUsersToday:0,activeSessions:0,growthRate:0}),e=T(()=>c.value?"Online":"Offline"),g=()=>{const o=localStorage.getItem("adminLogin");if(!o)return l.push("/admin-login"),!1;try{return JSON.parse(o).isAdmin===!0}catch{return l.push("/admin-login"),!1}},h=async()=>{if(!g())return;u.value=!0,n.value="";const o=[{uid:"1",email:"test@student.monash.edu",creationTime:new Date("2025-08-23"),lastSignInTime:new Date("2025-08-23"),disabled:!1}];t.value=o,m.value={totalUsers:o.length,newUsersToday:1,activeSessions:8,growthRate:12},u.value=!1},f=()=>{h()},_=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",S=()=>{localStorage.removeItem("adminLogin"),l.push("/admin-login")};return A(()=>{g()&&h()}),{users:t,userStats:m,isLoading:u,error:n,isConnected:c,connectionStatus:e,refreshUserData:f,formatDate:_,handleLogout:S}}},R={class:"admin-dashboard"},I={class:"dashboard-container"},N={class:"dashboard-header"},x={class:"stats-grid"},F={class:"stat-card"},O={class:"stat-content"},B={class:"stat-number"},M={key:0,class:"stat-change positive"},V={class:"stat-card"},E={class:"stat-content"},j={class:"stat-number"},z={class:"stat-card"},G={class:"stat-content"},J={class:"stat-number"},q={class:"stat-card"},H={class:"stat-content"},K={class:"stat-number"},P={class:"user-management"},Q={class:"section-header"},W=["disabled"],X={key:0},Y={key:1},Z={class:"user-table-container"},$={class:"user-table"},ss={key:0,class:"loading-state"},ts={key:1,class:"error-state"};function ns(l,t,u,n,c,m){return d(),i("div",R,[s("div",I,[s("div",N,[t[2]||(t[2]=s("h1",null,"🛡️ Admin Dashboard",-1)),t[3]||(t[3]=s("p",null,"System Overview and User Management",-1)),s("button",{onClick:t[0]||(t[0]=(...e)=>n.handleLogout&&n.handleLogout(...e)),class:"logout-btn"},"Logout")]),s("div",x,[s("div",F,[t[5]||(t[5]=s("div",{class:"stat-icon"},"👥",-1)),s("div",O,[t[4]||(t[4]=s("h3",null,"Total Users",-1)),s("div",B,a(n.userStats.totalUsers),1),n.userStats.newUsersToday>0?(d(),i("div",M," +"+a(n.userStats.newUsersToday)+" today ",1)):v("",!0)])]),s("div",V,[t[8]||(t[8]=s("div",{class:"stat-icon"},"📊",-1)),s("div",E,[t[6]||(t[6]=s("h3",null,"Active Sessions",-1)),s("div",j,a(n.userStats.activeSessions),1),t[7]||(t[7]=s("div",{class:"stat-change"},"Current online",-1))])]),s("div",z,[t[11]||(t[11]=s("div",{class:"stat-icon"},"📈",-1)),s("div",G,[t[9]||(t[9]=s("h3",null,"Growth Rate",-1)),s("div",J,a(n.userStats.growthRate)+"%",1),t[10]||(t[10]=s("div",{class:"stat-change positive"},"This month",-1))])]),s("div",q,[t[13]||(t[13]=s("div",{class:"stat-icon"},"🔥",-1)),s("div",H,[t[12]||(t[12]=s("h3",null,"Firebase Status",-1)),s("div",K,a(n.connectionStatus),1),s("div",{class:b(["stat-change",n.isConnected?"positive":"negative"])},a(n.isConnected?"Connected":"Disconnected"),3)])])]),s("div",P,[s("div",Q,[t[15]||(t[15]=s("h2",null,"User Management",-1)),s("button",{onClick:t[1]||(t[1]=(...e)=>n.refreshUserData&&n.refreshUserData(...e)),class:"refresh-btn",disabled:n.isLoading},[n.isLoading?(d(),i("span",X,"🔄")):(d(),i("span",Y,"🔄")),t[14]||(t[14]=y(" Refresh "))],8,W)]),s("div",Z,[s("table",$,[t[16]||(t[16]=s("thead",null,[s("tr",null,[s("th",null,"User ID"),s("th",null,"Email"),s("th",null,"Registration Date"),s("th",null,"Last Login"),s("th",null,"Status")])],-1)),s("tbody",null,[(d(!0),i(U,null,L(n.users,e=>(d(),i("tr",{key:e.uid,class:"user-row"},[s("td",null,a(e.uid.substring(0,8))+"...",1),s("td",null,a(e.email),1),s("td",null,a(n.formatDate(e.creationTime)),1),s("td",null,a(n.formatDate(e.lastSignInTime)),1),s("td",null,[s("span",{class:b(["status-badge",e.disabled?"disabled":"active"])},a(e.disabled?"Disabled":"Active"),3)])]))),128))])])]),n.isLoading?(d(),i("div",ss,t[17]||(t[17]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading user data...",-1)]))):v("",!0),n.error?(d(),i("div",ts,[s("p",null,a(n.error),1)])):v("",!0)])])])}const os=D(p,[["render",ns],["__scopeId","data-v-4c4cdd06"]]);export{os as default};
